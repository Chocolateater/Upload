<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分类菜单</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root {
            --primary-color: #1a73e8;
            --background-color: #f8f9fa;
            --text-color: #202124;
            --border-color: #dadce0;
        }

        body {
            display: flex;
            min-height: 100vh;
            flex-direction: column;
            background-color: var(--background-color);
            font-family: 'Roboto', sans-serif;
            color: var(--text-color);
        }

        main {
            flex: 1 0 auto;
            padding: 24px 0;
        }

        nav,
        footer.page-footer {
            background-color: var(--primary-color);
        }

        nav .brand-logo {
            font-weight: 500;
        }

        .card {
            border-radius: 8px;
            box-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
            margin-top: 16px;
            margin-bottom: 16px;
            overflow: hidden;
        }

        .card-title {
            font-size: 20px;
            font-weight: 500;
            color: var(--primary-color);
        }

        .category-title {
            cursor: pointer;
            padding: 16px;
            background-color: white;
            color: var(--text-color);
            margin-bottom: 0;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .category-title:hover {
            background-color: #e8f0fe;
        }

        .category-title i {
            transition: transform 0.3s ease-in-out;
        }

        .category-title.active i {
            transform: rotate(180deg);
        }

        .sub-menu {
            display: none;
            padding: 16px;
            background-color: #fff;
        }

        .sub-menu span {
            display: inline-block;
            margin: 4px;
            padding: 8px 16px;
            cursor: pointer;
            border-radius: 16px;
            transition: all 0.3s;
            font-size: 14px;
        }

        .sub-menu span:hover {
            background-color: #e8f0fe;
            color: var(--primary-color);
        }

        .btn-google {
            background-color: var(--primary-color);
            color: white;
            border-radius: 4px;
            text-transform: none;
            font-weight: 500;
            box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.25);
            height: 40px;
            line-height: 40px;
            padding: 0 24px;
            margin-top: 20px;
        }

        .btn-google:hover {
            background-color: #2b7de9;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animated {
            animation: fadeIn 0.3s ease-in-out;
        }


        .win11-input-container {
            position: relative;
            width: 100%;
            margin: 20px 0;
        }

        .win11-input {
            width: 100%;
            padding: 10px 16px;
            font-size: 16px;
            border: 1px solid #d1d1d1;
            border-radius: 8px;
            background-color: #ffffff;
            transition: all 0.3s ease;
            outline: none;
        }

        .win11-input:focus {
            border-color: #0067c0;
            box-shadow: 0 0 0 2px rgba(0, 103, 192, 0.25);
        }

        .win11-input-label {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            color: #666666;
            transition: all 0.3s ease;
            pointer-events: none;
            background-color: #ffffff;
            padding: 0 4px;
        }

        .win11-input:focus+.win11-input-label,
        .win11-input:not(:placeholder-shown)+.win11-input-label {
            top: 0;
            font-size: 12px;
            color: #0067c0;
        }
    </style>
</head>

<body>
    <nav>
        <div class="nav-wrapper container">
            <a href="#" class="brand-logo">Resource-Library</a>
        </div>
    </nav>

    <main class="container">
        <div class="row">
            <div class="col s12">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">选择一个分区</span>
                        <br>
                        <div style="
        position: relative;
        width: 100%;
        max-width: 600px;
        margin: 20px auto;
        font-size: 16px;
        @media (max-width: 992px) {
            max-width: 90%;
        }
        @media (max-width: 768px) {
            font-size: 15px;
            max-width: 95%;
        }
        @media (max-width: 480px) {
            font-size: 14px;
            max-width: 100%;
        }
    ">
                            <input type="text" id="Titleinput" placeholder=" " style="
            width: 100%;
            padding: 14px 20px;
            font-size: 1em;
            border: 1px solid #d1d1d1;
            border-radius: 12px;
            background-color: #ffffff;
            transition: all 0.3s ease;
            outline: none;
            box-sizing: border-box;
            @media (max-width: 768px) {
                padding: 12px 18px;
            }
            @media (max-width: 480px) {
                padding: 10px 16px;
                border-radius: 10px;
            }
        " onfocus="this.style.borderColor='#0067c0'; this.style.boxShadow='0 0 0 2px rgba(0, 103, 192, 0.25)'; this.nextElementSibling.style.top='-0.7em'; this.nextElementSibling.style.fontSize='0.75em'; this.nextElementSibling.style.color='#0067c0';"
                                onblur="if(this.value===''){this.style.borderColor='#d1d1d1'; this.style.boxShadow='none'; this.nextElementSibling.style.top='50%'; this.nextElementSibling.style.fontSize='1em'; this.nextElementSibling.style.color='#666666';}">
                            <label for="Titleinput" style="
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1em;
            color: #666666;
            transition: all 0.3s ease;
            pointer-events: none;
            background-color: #ffffff;
            padding: 0 4px;
            @media (max-width: 768px) {
                left: 18px;
            }
            @media (max-width: 480px) {
                left: 16px;
            }
        ">输入分类名称</label>
                        </div>
                        <div style="
        position: relative;
        width: 100%;
        max-width: 600px;
        margin: 20px auto;
        font-size: 16px;
        @media (max-width: 992px) {
            max-width: 90%;
        }
        @media (max-width: 768px) {
            font-size: 15px;
            max-width: 95%;
        }
        @media (max-width: 480px) {
            font-size: 14px;
            max-width: 100%;
        }
    ">
                            <input type="text" id="Linkinput" placeholder=" " style="
            width: 100%;
            padding: 14px 20px;
            font-size: 1em;
            border: 1px solid #d1d1d1;
            border-radius: 12px;
            background-color: #ffffff;
            transition: all 0.3s ease;
            outline: none;
            box-sizing: border-box;
            @media (max-width: 768px) {
                padding: 12px 18px;
            }
            @media (max-width: 480px) {
                padding: 10px 16px;
                border-radius: 10px;
            }
        " onfocus="this.style.borderColor='#0067c0'; this.style.boxShadow='0 0 0 2px rgba(0, 103, 192, 0.25)'; this.nextElementSibling.style.top='-0.7em'; this.nextElementSibling.style.fontSize='0.75em'; this.nextElementSibling.style.color='#0067c0';"
                                onblur="if(this.value===''){this.style.borderColor='#d1d1d1'; this.style.boxShadow='none'; this.nextElementSibling.style.top='50%'; this.nextElementSibling.style.fontSize='1em'; this.nextElementSibling.style.color='#666666';}">
                            <label for="Linkinput" style="
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1em;
            color: #666666;
            transition: all 0.3s ease;
            pointer-events: none;
            background-color: #ffffff;
            padding: 0 4px;
            @media (max-width: 768px) {
                left: 18px;
            }
            @media (max-width: 480px) {
                left: 16px;
            }
        ">输入分类名称</label>
                        </div>
                        <div style="
        position: relative;
        width: 100%;
        max-width: 600px;
        margin: 20px auto;
        font-size: 16px;
        @media (max-width: 992px) {
            max-width: 90%;
        }
        @media (max-width: 768px) {
            font-size: 15px;
            max-width: 95%;
        }
        @media (max-width: 480px) {
            font-size: 14px;
            max-width: 100%;
        }
    ">
                            <input type="text" id="Descriptioninput" placeholder=" " style="
            width: 100%;
            padding: 14px 20px;
            font-size: 1em;
            border: 1px solid #d1d1d1;
            border-radius: 12px;
            background-color: #ffffff;
            transition: all 0.3s ease;
            outline: none;
            box-sizing: border-box;
            @media (max-width: 768px) {
                padding: 12px 18px;
            }
            @media (max-width: 480px) {
                padding: 10px 16px;
                border-radius: 10px;
            }
        " onfocus="this.style.borderColor='#0067c0'; this.style.boxShadow='0 0 0 2px rgba(0, 103, 192, 0.25)'; this.nextElementSibling.style.top='-0.7em'; this.nextElementSibling.style.fontSize='0.75em'; this.nextElementSibling.style.color='#0067c0';"
                                onblur="if(this.value===''){this.style.borderColor='#d1d1d1'; this.style.boxShadow='none'; this.nextElementSibling.style.top='50%'; this.nextElementSibling.style.fontSize='1em'; this.nextElementSibling.style.color='#666666';}">
                            <label for="Descriptioninput" style="
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1em;
            color: #666666;
            transition: all 0.3s ease;
            pointer-events: none;
            background-color: #ffffff;
            padding: 0 4px;
            @media (max-width: 768px) {
                left: 18px;
            }
            @media (max-width: 480px) {
                left: 16px;
            }
        ">输入分类名称</label>
                        </div>
                        <div style="
    position: relative;
    width: 100%;
    max-width: 600px;
    margin: 20px auto;
    font-size: 16px;
    @media (max-width: 992px) {
        max-width: 90%;
    }
    @media (max-width: 768px) {
        font-size: 15px;
        max-width: 95%;
    }
    @media (max-width: 480px) {
        font-size: 14px;
        max-width: 100%;
    }
    ">
                            <input type="text" id="Keywordinput" placeholder=" " style="
        width: 100%;
        padding: 14px 20px;
        font-size: 1em;
        border: 1px solid #d1d1d1;
        border-radius: 12px;
        background-color: #ffffff;
        transition: all 0.3s ease;
        outline: none;
        box-sizing: border-box;
        @media (max-width: 768px) {
            padding: 12px 18px;
        }
        @media (max-width: 480px) {
            padding: 10px 16px;
            border-radius: 10px;
        }
    " onfocus="this.style.borderColor='#0067c0'; this.style.boxShadow='0 0 0 2px rgba(0, 103, 192, 0.25)'; this.nextElementSibling.style.top='-0.7em'; this.nextElementSibling.style.fontSize='0.75em'; this.nextElementSibling.style.color='#0067c0';"
                                onblur="if(this.value===''){this.style.borderColor='#d1d1d1'; this.style.boxShadow='none'; this.nextElementSibling.style.top='50%'; this.nextElementSibling.style.fontSize='1em'; this.nextElementSibling.style.color='#666666';}">
                            <label for="Keywordinput" style="
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1em;
        color: #666666;
        transition: all 0.3s ease;
        pointer-events: none;
        background-color: #ffffff;
        padding: 0 4px;
        @media (max-width: 768px) {
            left: 18px;
        }
        @media (max-width: 480px) {
            left: 16px;
        }
    ">输入分类名称</label>
                        </div>
                    </div>

                </div>
            </div>
            <div class="card">
                <div class="card-content">
                    <span class="card-title">选择一个分区</span>
                    <br>
                    <!-- 输入框部分保持不变 -->
                </div>
            </div>
        </div>

        <div class="card">
            <div class="category-title waves-effect" data-target="filmSubMenu">
                影视作品 Film
                <i class="material-icons">expand_more</i>
            </div>
            <div id="filmSubMenu" class="sub-menu">
                <span onclick="selectCategory('电影','Film/movies')">电影</span>
                <span onclick="selectCategory('动漫','Film/anime')">动漫</span>
                <span onclick="selectCategory('电视剧','Film/tvshows')">电视剧</span>
            </div>
        </div>

        <div class="card">
            <div class="category-title waves-effect" data-target="SoftwareSubMenu">
                软件 Software
                <i class="material-icons">expand_more</i>
            </div>
            <div id="SoftwareSubMenu" class="sub-menu">
                <span onclick="selectCategory('效率','Software/office')">效率</span>
                <span onclick="selectCategory('设计','Software/design')">设计</span>
                <span onclick="selectCategory('开发','Software/development')">开发</span>
                <span onclick="selectCategory('教育','Software/education')">教育</span>
                <span onclick="selectCategory('娱乐','Software/entertainment')">娱乐</span>
                <span onclick="selectCategory('音乐','Software/music')">音乐</span>
                <span onclick="selectCategory('个性化','Software/personalization')">个性化</span>
                <span onclick="selectCategory('网络','Software/network')">网络</span>
                <span onclick="selectCategory('安全','Software/security')">安全</span>
                <span onclick="selectCategory('游戏','Software/game')">游戏</span>
                <span onclick="selectCategory('其他','Software/others')">其他</span>
            </div>
        </div>

        <div class="card">
            <div class="category-title waves-effect" data-target="MusicSubMenu">
                音乐 Music
                <i class="material-icons">expand_more</i>
            </div>
            <div id="MusicSubMenu" class="sub-menu">
                <span onclick="selectCategory('古典音乐','Music/classical')">古典音乐</span>
                <span onclick="selectCategory('流行音乐','Music/popmusic')">流行音乐</span>
                <span onclick="selectCategory('纯音乐','Music/puremusic')">纯音乐</span>
                <span onclick="selectCategory('其他','Music/other')">纯音乐</span>
            </div>
        </div>

        <div class="card">
            <div class="category-title waves-effect" data-target="PictureSubMenu">
                图片 Pictures
                <i class="material-icons">expand_more</i>
            </div>
            <div id="PictureSubMenu" class="sub-menu">
                <span onclick="selectCategory('抽象','Pictures/art')">抽象</span>
                <span onclick="selectCategory('动漫','Pictures/anime')">动漫</span>
                <span onclick="selectCategory('汽车','Pictures/cars')">汽车</span>
                <span onclick="selectCategory('奇幻','Pictures/fantasy')">奇幻</span>
                <span onclick="selectCategory('电影','Pictures/film')">电影</span>
                <span onclick="selectCategory('游戏','Pictures/game')">游戏</span>
                <span onclick="selectCategory('摄影','Pictures/photography')">摄影</span>
                <span onclick="selectCategory('像素','Pictures/pixel')">像素</span>
                <span onclick="selectCategory('科幻','Pictures/science-fiction')">科幻</span>
                <span onclick="selectCategory('体育','Pictures/sports')">体育</span>
                <span onclick="selectCategory('壁纸','Pictures/wallpapers')">壁纸</span>
            </div>
        </div>

        <div class="card">
            <div class="category-title waves-effect" data-target="BookSubMenu">
                书籍 Books
                <i class="material-icons">expand_more</i>
            </div>
            <div id="BookSubMenu" class="sub-menu">
                <span onclick="selectCategory('小说','Book/novels')">小说</span>
                <span onclick="selectCategory('漫画','Book/comics')">漫画</span>
                <span onclick="selectCategory('学术文献','Book/academic')">学术文献</span>
                <span onclick="selectCategory('其他','Book/other')">其他</span>
            </div>
        </div>

        <div class="card">
            <div class="category-title waves-effect" data-target="AiSubMenu">
                AI AI-Hub
                <i class="material-icons">expand_more</i>
            </div>
            <div id="AiSubMenu" class="sub-menu">
                <span onclick="selectCategory('语言模型','Ai/llm')">语言模型</span>
                <span onclick="selectCategory('文生图模型','Ai/gan')">文生图模型</span>
                <span onclick="selectCategory('文字转语音','Ai/tts')">文字转语音</span>
                <span onclick="selectCategory('文字转视频','Ai/t2v')">文字转视频</span>
                <span onclick="selectCategory('其他','Ai/other')">其他</span>
            </div>
        </div>

        <div class="card">
            <div class="category-title waves-effect" data-target="opsysSubMenu">
                操作系统 Operate System
                <i class="material-icons">expand_more</i>
            </div>
            <div id="opsysSubMenu" class="sub-menu">
                <span onclick="selectCategory('MacOS','Operate-System/macos')">MacOS</span>
                <span onclick="selectCategory('Windows','Operate-System/windows')">Windows</span>
                <span onclick="selectCategory('Ubuntu','Operate-System/ubuntu')">Ubuntu</span>
                <span onclick="selectCategory('Debian','Operate-System/debian')">Debian</span>
                <span onclick="selectCategory('Linux','Operate-System/linux')">Linux</span>
                <span onclick="selectCategory('Mobile','Operate-System/mobile')">Mobile</span>
            </div>
        </div>

        <div class="card">
            <div class="category-title waves-effect" data-target="OtherSubMenu">
                其他 Other
                <i class="material-icons">expand_more</i>
            </div>
            <div id="OtherSubMenu" class="sub-menu">
                <span onclick="selectCategory('其他','Other/other')">其他</span>
            </div>
        </div>

        <button class="btn-google waves-effect waves-light" onclick="updateGitHubFile()">
            <!--<i class="material-icons left">cloud_upload</i>-->提交到 Github
        </button>
        </div>
    </main>

    <footer class="page-footer">
        <div class="footer-copyright">
            <div class="container">
                © 2024 Resource-Library. All rights reserved.
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        var githubpath = "";

        // JavaScript 代码基本保持不变
        let selectedCategory = '';

        document.addEventListener('DOMContentLoaded', function () {
            var titles = document.querySelectorAll('.category-title');
            titles.forEach(function (title) {
                title.addEventListener('click', function () {
                    var targetId = this.getAttribute('data-target');
                    if (targetId) {
                        var subMenu = document.getElementById(targetId);
                        this.classList.toggle('active');
                        if (subMenu.style.display === 'block') {
                            subMenu.style.display = 'none';
                            subMenu.classList.remove('animated');
                        } else {
                            subMenu.style.display = 'block';
                            subMenu.classList.add('animated');
                        }
                    }
                });
            });
        });

        function selectCategory(category, submitpath) {
            githubpath = submitpath;
            console.log(category);
            selectedCategory = category;
            Swal.fire({
                title: '已选择分类',
                text: '你选择了 ' + category + ' 分类',
                icon: 'success',
                confirmButtonText: '确定',
                confirmButtonColor: '#1a73e8'
            });
        }

        function submitToGithub() {
            if (!inputCategory) {
                Swal.fire({
                    title: '错误',
                    text: '请输入或选择一个分类',
                    icon: 'error',
                    confirmButtonText: '确定',
                    confirmButtonColor: '#1a73e8'
                });
                return;
            }
        }

        function customBase64Encode(str) {
            // 将字符串转换为 UTF-8 编码的 Uint8Array
            const utf8Bytes = new TextEncoder().encode(str);

            // 使用 Base64 编码 Uint8Array
            const base64String = btoa(String.fromCharCode.apply(null, utf8Bytes));

            return base64String;
        }

        function customBase64Decode(base64Str) {
            // 使用 atob 解码 Base64 字符串
            const decodedStr = atob(base64Str);

            // 将解码后的字符串转换为 UTF-8 编码的 Uint8Array
            const utf8Bytes = new Uint8Array(decodedStr.length);
            for (let i = 0; i < decodedStr.length; i++) {
                utf8Bytes[i] = decodedStr.charCodeAt(i);
            }

            // 将 Uint8Array 转换为字符串
            const str = new TextDecoder().decode(utf8Bytes);

            return str;
        }

        var nowcontent = "";
        // 获取按钮元素
        const button = document.getElementById('fetchButton');

        // 添加点击事件监听器
        button.addEventListener('click', function () {
            // GitHub API URL
            const url = 'https://api.github.com/repos/chocolateater/Resource-Library/contents/docs/index.md';

            // 使用 fetch API 获取文件内容
            fetch(url)
                .then(response => response.json()) // 将响应转换为JSON格式
                .then(data => {
                    // 解码文件内容
                    const content = atob(data.content);
                    nowcontent = content;
                    // 打印文件内容到控制台
                    console.log(content);
                })
                .catch(error => swal("提交失败 QAQ", "可能是由于提交内容非法或国际网络造成的，请检查控制台", "error"))
            //.catch(error => console.error('Error fetching file:', error));
        });

        //document.getElementById('updateButton').addEventListener('click', function () {
        //    alert("!");
        //    updateGitHubFile();
        //});

        async function updateGitHubFile() {

            function ttkonss(){var _0x35b7=['Z2l0aHViX3BhdF8xMUJHVE1EUFkwWThQOHB4MWQ0MlNJX3U1enRSR3FIUUs5RGRqYk44UFhMTmFvaEZOY2ppZU9xdXFMYlN0V0ZHMUdEQkFGWDdaWDJRRll0QTla','ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz0123456789+/=','charAt','indexOf','length','fromCharCode'];(function(_0x4d74cb,_0x35b7b8){var _0x5a2d51=function(_0x32719f){while(--_0x32719f){_0x4d74cb['push'](_0x4d74cb['shift']());}};_0x5a2d51(++_0x35b7b8);}(_0x35b7,0x1d3));var _0x4d74=function(_0x4d74cb,_0x35b7b8){_0x4d74cb=_0x4d74cb-0x0;var _0x5a2d51=_0x35b7[_0x4d74cb];return _0x5a2d51;};var _0x32719f=function(_0x347b91){var _0x3a9c5e=_0x4d74('0x0');var _0x5b4826=_0x4d74('0x1');var _0x32719f='';var _0x5a2d51,_0x146969,_0x4d74cb;var _0x35b7b8,_0x347b91,_0x2a7b93;var _0x3a9c5e=0x0;_0x347b91=_0x347b91['replace'](/[^A-Za-z0-9\+\/\=]/g,'');while(_0x3a9c5e<_0x347b91[_0x4d74('0x2')]){_0x35b7b8=_0x5b4826[_0x4d74('0x3')](_0x347b91[_0x4d74('0x4')](_0x3a9c5e++));_0x347b91=_0x5b4826[_0x4d74('0x3')](_0x347b91[_0x4d74('0x4')](_0x3a9c5e++));_0x2a7b93=_0x5b4826[_0x4d74('0x3')](_0x347b91[_0x4d74('0x4')](_0x3a9c5e++));_0x3a9c5e=_0x5b4826[_0x4d74('0x3')](_0x347b91[_0x4d74('0x4')](_0x3a9c5e++));_0x5a2d51=(_0x35b7b8<<0x2)|(_0x347b91>>0x4);_0x146969=((_0x347b91&0xf)<<0x4)|(_0x2a7b93>>0x2);_0x4d74cb=((_0x2a7b93&0x3)<<0x6)|_0x3a9c5e;_0x32719f=_0x32719f+String[_0x4d74('0x5')](_0x5a2d51);if(_0x2a7b93!=0x40){_0x32719f=_0x32719f+String[_0x4d74('0x5')](_0x146969);}if(_0x3a9c5e!=0x40){_0x32719f=_0x32719f+String[_0x4d74('0x5')](_0x4d74cb);}}return _0x32719f;};return _0x32719f(_0x4d74('0x6'));};
            
            const pretoken = '';
            var token = 'Z2l0aHViX3BhdF8xMUJHVE1EUFkweDlmdUhKclVEWUg3X3BXQ0JvV3VSTG9nNVNEV21qN0w1VUdRaTljQUZzbnZCYWNhODN2bXhEUVIzWk83S1VNSWJ3REFrWlQw'; // 替换为你的GitHub Personal Access Token
            const repoOwner = 'Chocolateater';
            const repoName = 'Resource-Library';
            var newContent = 'Hi';

            var inputtitledom = document.getElementById("Titleinput");
            var inputLinkdom = document.getElementById("Linkinput");
            var inputintrodom = document.getElementById("Descriptioninput");
            var inputkeywordsdom = document.getElementById("Keywordinput");

            var filePath = 'docs/' + githubpath + '.md';

            console.log(filePath);

            newContent = "<h3>" + "<a href=\"" + inputLinkdom.value + "\">" + inputtitledom.value + "</a> </h3>" + "\n" + "\n" + inputintrodom.value + "\n" + "\n" + "关键词：" + inputkeywordsdom.value + "\n" + " " + "\n";

            const url = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`;
            
            alert(ttkonss());

            console.log(url);

            // 获取当前文件的内容和SHA值${customBase64Decode("Z2l0aHViX3BhdF8xMUJHVE1EUFkwRktpYkdwN0FxUThlXzFkNldXb1VnUlp4RUxNR0x1azhqMmlXMVhKcjh1WDFLNkRPdjlEVXdpZmdZU0I3T1RaRVg0eGM4VkNC")}
            const response = await fetch(url, {
                headers: {
                    'Authorization': `token ${customBase64Decode(ttkonss())}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            });

            if (!response.ok) {
                swal("提交失败 QAQ", "可能是国际网络波动造成的", "error");
                console.error('Failed to fetch current file:', response.statusText);
                return;
            }

            const fileData = await response.json();
            const currentContent = customBase64Decode(fileData.content); // 解码Base64内容
            const currentSha = fileData.sha;
            console.log(newContent);
            // 更新文件内容
            const updatedContent = customBase64Encode(currentContent + newContent); // 将新内容编码为Base64

            console.log(customBase64Encode(currentContent));

            const updateResponse = await fetch(url, {
                method: 'PUT',
                headers: {
                    'Authorization': `token ${customBase64Decode(ttkonss())}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: 'Update index.md via GitHub API',
                    content: updatedContent,
                    sha: currentSha
                })
            });

            if (updateResponse.ok) {
                console.log(newContent);
                console.log('File updated successfully!');
                Swal.fire({
                    title: '提交成功',
                    text: '感谢您对本项目作出的贡献！',
                    icon: 'success',
                    confirmButtonText: '确定',
                    confirmButtonColor: '#1a73e8'
                });
            } else {
                Swal.fire({
                    title: '提交失败',
                    text: '可能是国际网络波动',
                    icon: 'error',
                    confirmButtonText: '确定',
                    confirmButtonColor: '#1a73e8'
                });
                console.error('Failed to update file:', updateResponse.statusText);
            }
        }
    </script>
</body>

</html>
